{"ast":null,"code":"import React from 'react';\nvar list = {};\nexport function useMediaQuery(media) {\n  var mediaQueryList = React.useMemo(function () {\n    // We have an existing mediaQueryList for media.\n    if (list[media]) {\n      return list[media].mql;\n    }\n    if (typeof window !== 'undefined') {\n      return matchMedia(media);\n    }\n    // Server: use a fallback.\n    return {\n      matches: true,\n      media: media\n    };\n  }, [list, media]);\n  // Since the mediaQueryList is shared we use state to trigger re-renders.\n  // This is done with update({}) (a new object instance will force a re-rendering).\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  var _a = React.useState({}),\n    _ = _a[0],\n    update = _a[1];\n  React.useLayoutEffect(function () {\n    if (list[media]) {\n      list[media].notifiers.push(update);\n    } else {\n      list[media] = {\n        mql: mediaQueryList,\n        notifiers: [update],\n        listener: function (mql) {\n          var match = list[mql.media];\n          if (match) {\n            for (var _i = 0, _a = match.notifiers; _i < _a.length; _i++) {\n              var updateFn = _a[_i];\n              updateFn({});\n            }\n          }\n        }\n      };\n      list[media].mql.addEventListener('change', list[media].listener);\n    }\n    return function () {\n      var notifierIndex = list[media].notifiers.indexOf(update);\n      if (notifierIndex > -1) {\n        // Remove `update`.\n        list[media].notifiers.splice(notifierIndex, 1);\n      }\n      if (list[media].notifiers.length === 0) {\n        list[media].mql.removeEventListener('change', list[media].listener);\n        delete list[media];\n      }\n    };\n  }, [list, media, mediaQueryList]);\n  return mediaQueryList;\n}\nexport function MediaQuery(_a) {\n  var media = _a.media,\n    children = _a.children;\n  var mql = useMediaQuery(media);\n  return typeof children === 'function' ? children(mql) : null;\n}\nvar DOM_LAYOUT_HANDLER_NAME = '__reactLayoutHandler';\nvar supportsBorderBox = function () {\n  if (typeof document === 'undefined') {\n    return false;\n  }\n  var e = document.body.appendChild(document.createElement('div'));\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  var observer = new ResizeObserver(function () {});\n  try {\n    observer.observe(e, {\n      box: 'border-box'\n    });\n    observer.unobserve(e);\n    return true;\n  } catch (error) {\n    return false;\n  } finally {\n    document.body.removeChild(e);\n  }\n}();\nvar resizeObserver = null;\nfunction getResizeObserver() {\n  if (resizeObserver) {\n    return resizeObserver;\n  }\n  if (typeof ResizeObserver === 'undefined') {\n    return;\n  }\n  resizeObserver = new ResizeObserver(function (entries) {\n    var _loop_1 = function (entry) {\n      var node = entry.target;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var onLayout = node[DOM_LAYOUT_HANDLER_NAME];\n      if (typeof onLayout !== 'function') {\n        return {\n          value: void 0\n        };\n      }\n      if (supportsBorderBox && entry.borderBoxSize) {\n        var boxSize_1 = entry.borderBoxSize[0] || entry.borderBoxSize;\n        onLayout(function (prevRect) {\n          if (prevRect.width === boxSize_1.inlineSize && prevRect.height === boxSize_1.blockSize) {\n            return prevRect;\n          }\n          return new DOMRect(0, 0, boxSize_1.inlineSize, boxSize_1.blockSize);\n        });\n        return {\n          value: void 0\n        };\n      }\n      var elRect = entry.target.getBoundingClientRect();\n      onLayout(function (prevRect) {\n        if (prevRect.width === elRect.width && prevRect.height === elRect.height) {\n          return prevRect;\n        }\n        return new DOMRect(0, 0, elRect.width, elRect.height);\n      });\n    };\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n      var entry = entries_1[_i];\n      var state_1 = _loop_1(entry);\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n  });\n  return resizeObserver;\n}\nexport function useElementLayout(ref) {\n  var observer = getResizeObserver();\n  var _a = React.useState(new DOMRect()),\n    rect = _a[0],\n    setRect = _a[1];\n  React.useLayoutEffect(function () {\n    var node = ref.current;\n    if (node) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      node[DOM_LAYOUT_HANDLER_NAME] = setRect;\n    }\n    if (node && observer) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (typeof node[DOM_LAYOUT_HANDLER_NAME] === 'function') {\n        observer.observe(node, supportsBorderBox ? {\n          box: 'border-box'\n        } : undefined);\n      } else {\n        observer.unobserve(node);\n      }\n    }\n    return function () {\n      if (node != null && observer != null) {\n        observer.unobserve(node);\n      }\n    };\n  }, [ref, observer]);\n  return rect;\n}","map":{"version":3,"names":["React","list","useMediaQuery","media","mediaQueryList","useMemo","mql","window","matchMedia","matches","_a","useState","_","update","useLayoutEffect","notifiers","push","listener","match","_i","length","updateFn","addEventListener","notifierIndex","indexOf","splice","removeEventListener","MediaQuery","children","DOM_LAYOUT_HANDLER_NAME","supportsBorderBox","document","e","body","appendChild","createElement","observer","ResizeObserver","observe","box","unobserve","error","removeChild","resizeObserver","getResizeObserver","entries","entry","node","target","onLayout","borderBoxSize","boxSize_1","prevRect","width","inlineSize","height","blockSize","DOMRect","elRect","getBoundingClientRect","entries_1","useElementLayout","ref","rect","setRect","current","undefined"],"sources":["/Users/fabienpicard/Projects/astro-website/node_modules/datocms-react-ui/src/useMediaQuery/index.ts"],"sourcesContent":["import React from 'react';\n\nconst list: Record<\n  string,\n  {\n    mql: MediaQueryList;\n    notifiers: Array<(value: Record<string, never>) => void>;\n    listener: (mql: MediaQueryListEvent) => void;\n  }\n> = {};\n\nexport function useMediaQuery(media: string): MediaQueryList {\n  const mediaQueryList = React.useMemo(() => {\n    // We have an existing mediaQueryList for media.\n    if (list[media]) {\n      return list[media].mql;\n    }\n\n    if (typeof window !== 'undefined') {\n      return matchMedia(media);\n    }\n\n    // Server: use a fallback.\n    return { matches: true, media } as MediaQueryList;\n  }, [list, media]);\n\n  // Since the mediaQueryList is shared we use state to trigger re-renders.\n  // This is done with update({}) (a new object instance will force a re-rendering).\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_, update] = React.useState<Record<string, never>>({});\n\n  React.useLayoutEffect(() => {\n    if (list[media]) {\n      list[media].notifiers.push(update);\n    } else {\n      list[media] = {\n        mql: mediaQueryList,\n        notifiers: [update],\n        listener: (mql) => {\n          const match = list[mql.media];\n          if (match) {\n            for (const updateFn of match.notifiers) {\n              updateFn({});\n            }\n          }\n        },\n      };\n      list[media].mql.addEventListener('change', list[media].listener);\n    }\n    return () => {\n      const notifierIndex = list[media].notifiers.indexOf(update);\n      if (notifierIndex > -1) {\n        // Remove `update`.\n        list[media].notifiers.splice(notifierIndex, 1);\n      }\n      if (list[media].notifiers.length === 0) {\n        list[media].mql.removeEventListener('change', list[media].listener);\n        delete list[media];\n      }\n    };\n  }, [list, media, mediaQueryList]);\n\n  return mediaQueryList;\n}\n\nexport type MediaQueryProps = {\n  media: string;\n  children: (mql: MediaQueryList) => JSX.Element;\n};\n\nexport function MediaQuery({\n  media,\n  children,\n}: MediaQueryProps): JSX.Element | null {\n  const mql = useMediaQuery(media);\n  return typeof children === 'function' ? children(mql) : null;\n}\n\nconst DOM_LAYOUT_HANDLER_NAME = '__reactLayoutHandler';\n\nconst supportsBorderBox = (() => {\n  if (typeof document === 'undefined') {\n    return false;\n  }\n  const e = document.body.appendChild(document.createElement('div'));\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  const observer = new ResizeObserver(() => {});\n  try {\n    observer.observe(e, { box: 'border-box' });\n    observer.unobserve(e);\n    return true;\n  } catch (error) {\n    return false;\n  } finally {\n    document.body.removeChild(e);\n  }\n})();\n\nlet resizeObserver: ResizeObserver | null = null;\n\nfunction getResizeObserver(): ResizeObserver | undefined {\n  if (resizeObserver) {\n    return resizeObserver;\n  }\n\n  if (typeof ResizeObserver === 'undefined') {\n    return;\n  }\n\n  resizeObserver = new ResizeObserver((entries) => {\n    for (const entry of entries) {\n      const node = entry.target;\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const onLayout = (node as any)[DOM_LAYOUT_HANDLER_NAME] as\n        | React.Dispatch<React.SetStateAction<DOMRect>>\n        | undefined;\n\n      if (typeof onLayout !== 'function') {\n        return;\n      }\n\n      if (supportsBorderBox && entry.borderBoxSize) {\n        const boxSize = entry.borderBoxSize[0] || entry.borderBoxSize;\n        onLayout((prevRect) => {\n          if (\n            prevRect.width === boxSize.inlineSize &&\n            prevRect.height === boxSize.blockSize\n          ) {\n            return prevRect;\n          }\n          return new DOMRect(0, 0, boxSize.inlineSize, boxSize.blockSize);\n        });\n        return;\n      }\n\n      const elRect = entry.target.getBoundingClientRect();\n\n      onLayout((prevRect) => {\n        if (\n          prevRect.width === elRect.width &&\n          prevRect.height === elRect.height\n        ) {\n          return prevRect;\n        }\n        return new DOMRect(0, 0, elRect.width, elRect.height);\n      });\n    }\n  });\n\n  return resizeObserver;\n}\n\nexport function useElementLayout(\n  ref: React.MutableRefObject<Element> | React.RefObject<Element>,\n): DOMRect {\n  const observer = getResizeObserver();\n  const [rect, setRect] = React.useState(new DOMRect());\n\n  React.useLayoutEffect(() => {\n    const node = ref.current;\n\n    if (node) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (node as any)[DOM_LAYOUT_HANDLER_NAME] = setRect;\n    }\n\n    if (node && observer) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (typeof (node as any)[DOM_LAYOUT_HANDLER_NAME] === 'function') {\n        observer.observe(\n          node,\n          supportsBorderBox ? { box: 'border-box' } : undefined,\n        );\n      } else {\n        observer.unobserve(node);\n      }\n    }\n    return () => {\n      if (node != null && observer != null) {\n        observer.unobserve(node);\n      }\n    };\n  }, [ref, observer]);\n\n  return rect;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}