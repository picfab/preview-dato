{"ast":null,"code":"import React from\"react\";import{createRoot}from\"react-dom/client\";import{connect}from\"datocms-plugin-sdk\";import\"datocms-react-ui/styles.css\";import ConfigScreen from\"./entrypoints/ConfigScreen\";import{render}from\"./utils/render\";import{findProductionUri}from\"./utils/findProductionUrl\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const container=document.getElementById(\"root\");const siteUrl=process.env.REACT_APP_SITE_URL;const previewSiteUrl=process.env.REACT_APP_PREVIEW_SITE_URL;connect({renderConfigScreen(ctx){return render(/*#__PURE__*/_jsx(ConfigScreen,{ctx:ctx}));},itemFormSidebarPanels(model,ctx){return[{id:\"goToWebsite\",label:\"Go to website\",startOpen:true}];},renderItemFormSidebarPanel(sidebarPanelId,ctx){var _ctx$item,_ctx$item$attributes,_ctx$item$attributes$;ctx.startAutoResizer();const locale=ctx.locale;const postTypeApyKey=ctx.itemType.attributes.api_key;const slug=(_ctx$item=ctx.item)===null||_ctx$item===void 0?void 0:(_ctx$item$attributes=_ctx$item.attributes)===null||_ctx$item$attributes===void 0?void 0:(_ctx$item$attributes$=_ctx$item$attributes.slug)===null||_ctx$item$attributes$===void 0?void 0:_ctx$item$attributes$[locale];const prodUri=findProductionUri(locale,postTypeApyKey,slug);if(container&&prodUri){var _ctx$item2,_ctx$itemType,_ctx$itemType$attribu;const root=createRoot(container);root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(ctx.item,null,2)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",width:\"100%\",minHeight:\"200px\",backgroundImage:\"linear-gradient(180deg, #ebf4ff, #fff)\",gap:\"16px\"},children:[/*#__PURE__*/_jsx(\"a\",{href:`${siteUrl}/${prodUri}`,target:\"_blank\",rel:\"noreferrer\",style:{display:\"block\",paddingBottom:\"12px\",paddingTop:\"12px\",paddingLeft:\"16px\",paddingRight:\"16px\",backgroundColor:\"white\",color:\"#132D4A\",minHeight:\"48px\",fontWeight:500,fontSize:\"16px\",fontFamily:\"sans-serif\",borderRadius:\"12px\",textDecoration:\"none\",transition:\"all 0.3s ease-in-out\",boxSizing:\"border-box\"},onMouseEnter:e=>{e.target.style.boxShadow=\"0px 4px 12px rgba(0, 0, 0, 0.2)\";e.target.style.backgroundColor=\"#f6f6f7\";},onMouseLeave:e=>{e.target.style.boxShadow=\"none\";e.target.style.backgroundColor=\"white\";},children:\"Production View\"}),/*#__PURE__*/_jsx(\"a\",{href:`${previewSiteUrl}/preview/?datoSlug=${slug}&id=${ctx===null||ctx===void 0?void 0:(_ctx$item2=ctx.item)===null||_ctx$item2===void 0?void 0:_ctx$item2.id}&locale=${ctx.locale}&type=${(_ctx$itemType=ctx.itemType)===null||_ctx$itemType===void 0?void 0:(_ctx$itemType$attribu=_ctx$itemType.attributes)===null||_ctx$itemType$attribu===void 0?void 0:_ctx$itemType$attribu.api_key}`,target:\"_blank\",rel:\"noreferrer\",style:{display:\"block\",paddingBottom:\"12px\",paddingTop:\"12px\",paddingLeft:\"16px\",paddingRight:\"16px\",backgroundColor:\"#0F6FDE\",color:\"white\",minHeight:\"48px\",fontWeight:500,fontSize:\"16px\",fontFamily:\"sans-serif\",borderRadius:\"12px\",textDecoration:\"none\",transition:\"all 0.3s ease-in-out\",boxSizing:\"border-box\"},onMouseEnter:e=>{e.target.style.boxShadow=\"0px 4px 12px rgba(0, 0, 0, 0.2)\";e.target.style.backgroundColor=\"#0964cd\";},onMouseLeave:e=>{e.target.style.boxShadow=\"none\";e.target.style.backgroundColor=\"#0F6FDE\";},children:\"Preview\"})]})]})})}));}}});","map":{"version":3,"names":["React","createRoot","connect","ConfigScreen","render","findProductionUri","jsx","_jsx","jsxs","_jsxs","container","document","getElementById","siteUrl","process","env","REACT_APP_SITE_URL","previewSiteUrl","REACT_APP_PREVIEW_SITE_URL","renderConfigScreen","ctx","itemFormSidebarPanels","model","id","label","startOpen","renderItemFormSidebarPanel","sidebarPanelId","_ctx$item","_ctx$item$attributes","_ctx$item$attributes$","startAutoResizer","locale","postTypeApyKey","itemType","attributes","api_key","slug","item","prodUri","_ctx$item2","_ctx$itemType","_ctx$itemType$attribu","root","StrictMode","children","className","JSON","stringify","style","display","justifyContent","alignItems","width","minHeight","backgroundImage","gap","href","target","rel","paddingBottom","paddingTop","paddingLeft","paddingRight","backgroundColor","color","fontWeight","fontSize","fontFamily","borderRadius","textDecoration","transition","boxSizing","onMouseEnter","e","boxShadow","onMouseLeave"],"sources":["/Users/fabienpicard/Projects/astro-website/apps/datocms-plugin-preview-button/src/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport {\n  connect,\n  IntentCtx,\n  RenderItemFormSidebarPanelCtx,\n  ItemType,\n} from \"datocms-plugin-sdk\";\nimport \"datocms-react-ui/styles.css\";\nimport ConfigScreen from \"./entrypoints/ConfigScreen\";\nimport { render } from \"./utils/render\";\nimport { findProductionUri, SiteLocale } from \"./utils/findProductionUrl\";\n\nconst container = document.getElementById(\"root\");\nconst siteUrl = process.env.REACT_APP_SITE_URL;\nconst previewSiteUrl = process.env.REACT_APP_PREVIEW_SITE_URL;\n\nconnect({\n  renderConfigScreen(ctx) {\n    return render(<ConfigScreen ctx={ctx} />);\n  },\n  itemFormSidebarPanels(model: ItemType, ctx: IntentCtx) {\n    return [\n      {\n        id: \"goToWebsite\",\n        label: \"Go to website\",\n        startOpen: true,\n      },\n    ];\n  },\n  renderItemFormSidebarPanel(\n    sidebarPanelId,\n    ctx: RenderItemFormSidebarPanelCtx,\n  ) {\n    ctx.startAutoResizer();\n    const locale = ctx.locale as SiteLocale;\n    const postTypeApyKey = ctx.itemType.attributes.api_key;\n    const slug = (ctx.item?.attributes?.slug as any)?.[locale] as string;\n    const prodUri = findProductionUri(locale, postTypeApyKey, slug);\n    if (container && prodUri) {\n      const root = createRoot(container);\n      root.render(\n        <React.StrictMode>\n          <div>\n            <div className=\"container\">\n              <pre>{JSON.stringify(ctx.item, null, 2)}</pre>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  width: \"100%\",\n                  minHeight: \"200px\",\n                  backgroundImage: \"linear-gradient(180deg, #ebf4ff, #fff)\",\n                  gap: \"16px\",\n                }}\n              >\n                <a\n                  href={`${siteUrl}/${prodUri}`}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  style={{\n                    display: \"block\",\n                    paddingBottom: \"12px\",\n                    paddingTop: \"12px\",\n                    paddingLeft: \"16px\",\n                    paddingRight: \"16px\",\n                    backgroundColor: \"white\",\n                    color: \"#132D4A\",\n                    minHeight: \"48px\",\n                    fontWeight: 500,\n                    fontSize: \"16px\",\n                    fontFamily: \"sans-serif\",\n                    borderRadius: \"12px\",\n                    textDecoration: \"none\",\n                    transition: \"all 0.3s ease-in-out\",\n                    boxSizing: \"border-box\",\n                  }}\n                  onMouseEnter={(e) => {\n                    (e.target as HTMLElement).style.boxShadow =\n                      \"0px 4px 12px rgba(0, 0, 0, 0.2)\";\n                    (e.target as HTMLElement).style.backgroundColor = \"#f6f6f7\";\n                  }}\n                  onMouseLeave={(e) => {\n                    (e.target as HTMLElement).style.boxShadow = \"none\";\n                    (e.target as HTMLElement).style.backgroundColor = \"white\";\n                  }}\n                >\n                  Production View\n                </a>\n                <a\n                  href={`${previewSiteUrl}/preview/?datoSlug=${slug}&id=${ctx?.item?.id}&locale=${ctx.locale}&type=${ctx.itemType?.attributes?.api_key}`}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  style={{\n                    display: \"block\",\n                    paddingBottom: \"12px\",\n                    paddingTop: \"12px\",\n                    paddingLeft: \"16px\",\n                    paddingRight: \"16px\",\n                    backgroundColor: \"#0F6FDE\",\n                    color: \"white\",\n                    minHeight: \"48px\",\n                    fontWeight: 500,\n                    fontSize: \"16px\",\n                    fontFamily: \"sans-serif\",\n                    borderRadius: \"12px\",\n                    textDecoration: \"none\",\n                    transition: \"all 0.3s ease-in-out\",\n                    boxSizing: \"border-box\",\n                  }}\n                  onMouseEnter={(e) => {\n                    (e.target as HTMLElement).style.boxShadow =\n                      \"0px 4px 12px rgba(0, 0, 0, 0.2)\";\n                    (e.target as HTMLElement).style.backgroundColor = \"#0964cd\";\n                  }}\n                  onMouseLeave={(e) => {\n                    (e.target as HTMLElement).style.boxShadow = \"none\";\n                    (e.target as HTMLElement).style.backgroundColor = \"#0F6FDE\";\n                  }}\n                >\n                  Preview\n                </a>\n              </div>\n            </div>\n          </div>\n        </React.StrictMode>,\n      );\n    }\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}