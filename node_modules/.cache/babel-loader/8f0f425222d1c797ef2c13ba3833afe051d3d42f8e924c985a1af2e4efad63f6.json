{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { createRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useInView } from 'react-intersection-observer';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { mergeRefs } from '../mergeRefs';\nimport { DropdownContext } from './DropdownContext';\nimport { Group } from './Group';\nimport { MenuContext } from './MenuContext';\nimport { Portal } from './Portal';\nimport s from './styles.module.css.json';\nvar MenuDesktopContainer = React.forwardRef(function (_a, ref) {\n  var children = _a.children;\n  return React.createElement(Portal, null, React.createElement(\"div\", {\n    className: s['Dropdown__menu-container'],\n    style: {\n      zIndex: 1000\n    },\n    ref: ref\n  }, children));\n});\nfunction getAbsoluteHeight(el) {\n  var styles = window.getComputedStyle(el);\n  var margin = Number.parseFloat(styles.marginTop) + Number.parseFloat(styles.marginBottom);\n  return Math.ceil(el.offsetHeight + margin);\n}\nfunction getAbsoluteWidth(el) {\n  var styles = window.getComputedStyle(el);\n  var margin = Number.parseFloat(styles.marginLeft) + Number.parseFloat(styles.marginRight);\n  return Math.ceil(el.offsetWidth + margin);\n}\nfunction setPosition(panel, parent, alignment) {\n  var rect = parent.getBoundingClientRect();\n  var height = getAbsoluteHeight(panel);\n  var parentWidth = getAbsoluteWidth(parent);\n  var width = getAbsoluteWidth(panel);\n  if (alignment === 'left') {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.left = \"\".concat(rect.left + window.pageXOffset, \"px\");\n  } else {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.left = \"\".concat(rect.left + window.pageXOffset + parentWidth - width, \"px\");\n  }\n  var windowHeight = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n  var menu = panel.querySelector(\".\".concat(s.Dropdown__menu));\n  if (!menu) {\n    return;\n  }\n  var styles = window.getComputedStyle(menu);\n  var marginTop = Number.parseFloat(styles.marginTop);\n  var fitsBelow = rect.bottom + height <= windowHeight;\n  var fitsAbove = rect.top - height > 0;\n  if (!fitsBelow && fitsAbove) {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.top = \"\".concat(rect.bottom - height, \"px\");\n  } else if (fitsBelow) {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.top = \"\".concat(rect.bottom, \"px\");\n  } else {\n    var spaceAbove = rect.top;\n    var spaceBelow = windowHeight - rect.bottom;\n    if (spaceBelow > spaceAbove) {\n      // eslint-disable-next-line no-param-reassign\n      panel.style.top = \"\".concat(rect.bottom, \"px\");\n      menu.style.maxHeight = \"\".concat(windowHeight - rect.bottom - marginTop - 10, \"px\");\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      panel.style.top = '0px';\n      menu.style.maxHeight = \"\".concat(rect.top - marginTop, \"px\");\n    }\n  }\n  // eslint-disable-next-line no-param-reassign\n  panel.style.visibility = 'visible';\n}\nexport var Menu = function (_a) {\n  var children = _a.children,\n    _b = _a.alignment,\n    alignment = _b === void 0 ? 'left' : _b;\n  var closeMenu = useContext(DropdownContext).closeMenu;\n  var childrenArray = React.Children.toArray(children);\n  var _c = useState(''),\n    searchTerm = _c[0],\n    setSearchTerm = _c[1];\n  var _d = useState([]),\n    options = _d[0],\n    setOptions = _d[1];\n  var handleChange = useCallback(function (e) {\n    setSearchTerm(e.target.value);\n  }, [setSearchTerm]);\n  var anyGroup = childrenArray.some(function (child) {\n    return typeof child === 'object' && 'type' in child && child.type === Group;\n  });\n  var addOption = useCallback(function (id) {\n    setOptions(function (old) {\n      return __spreadArray(__spreadArray([], old, true), [{\n        id: id\n      }], false);\n    });\n    return function () {\n      setOptions(function (old) {\n        return old.filter(function (x) {\n          return x.id !== id;\n        });\n      });\n    };\n  }, [setOptions]);\n  var setClickHandlerForOption = useCallback(function (id, handler) {\n    setOptions(function (old) {\n      return old.map(function (x) {\n        return x.id !== id ? x : __assign(__assign({}, x), {\n          handler: handler\n        });\n      });\n    });\n  }, [setOptions]);\n  var contentRef = useRef(null);\n  var handleKeyDown = useCallback(function (event) {\n    if (event.key === 'Escape') {\n      event.preventDefault();\n      event.stopPropagation();\n      closeMenu();\n    }\n    if (['ArrowDown', 'ArrowUp'].includes(event.key)) {\n      event.preventDefault();\n      event.stopPropagation();\n      if (!contentRef.current) {\n        return;\n      }\n      var delta = event.key === 'ArrowUp' ? -1 : 1;\n      var selectedOption_1 = contentRef.current.querySelector(\".\".concat(s['Dropdown__menu__option--is-selected']));\n      var nextOption = void 0;\n      if (!selectedOption_1) {\n        nextOption = contentRef.current.querySelector(\".\".concat(s.Dropdown__menu__option));\n      } else {\n        var elements = Array.from(contentRef.current.querySelectorAll(\".\".concat(s.Dropdown__menu__option)));\n        var index = elements.findIndex(function (el) {\n          return el === selectedOption_1;\n        });\n        var nextIndex = index + delta < 0 ? elements.length - 1 : (index + delta) % elements.length;\n        nextOption = elements[nextIndex];\n        selectedOption_1.classList.remove(s['Dropdown__menu__option--is-selected']);\n      }\n      if (nextOption) {\n        nextOption.classList.add(s['Dropdown__menu__option--is-selected']);\n        scrollIntoView(nextOption, {\n          scrollMode: 'if-needed',\n          behavior: 'auto'\n        });\n      }\n    }\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      event.stopPropagation();\n      if (!contentRef.current) {\n        return;\n      }\n      var selectedOption = contentRef.current.querySelector(\".\".concat(s['Dropdown__menu__option--is-selected']));\n      if (selectedOption) {\n        var id_1 = selectedOption.dataset.optionId;\n        var option = options.find(function (x) {\n          return x.id === id_1;\n        });\n        if (option === null || option === void 0 ? void 0 : option.handler) {\n          option.handler(event);\n        }\n      }\n    }\n  }, [options]);\n  var _e = useInView({\n      threshold: 0,\n      rootMargin: '0px 0px 0px 0px',\n      triggerOnce: false\n    }),\n    observerRef = _e[0],\n    inView = _e[1],\n    entry = _e[2];\n  var parentRef = createRef();\n  var menuRef = createRef();\n  var reposition = useCallback(function () {\n    if (menuRef.current && parentRef.current) {\n      setPosition(menuRef.current, parentRef.current, alignment);\n    }\n  }, [menuRef, parentRef, alignment]);\n  useEffect(function () {\n    reposition();\n  }, [inView, entry === null || entry === void 0 ? void 0 : entry.intersectionRatio]);\n  useEffect(function () {\n    if (menuRef.current && parentRef.current) {\n      var resizeObserver_1 = new ResizeObserver(reposition);\n      resizeObserver_1.observe(menuRef.current);\n      resizeObserver_1.observe(parentRef.current);\n      return function () {\n        resizeObserver_1.disconnect();\n      };\n    }\n    return undefined;\n  }, [menuRef, reposition]);\n  useEffect(function () {\n    window.addEventListener('resize', reposition);\n    return function () {\n      return window.removeEventListener('resize', reposition);\n    };\n  }, [reposition]);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    ref: mergeRefs(observerRef, parentRef),\n    className: s.Dropdown__spacer\n  }), React.createElement(MenuDesktopContainer, {\n    ref: menuRef\n  }, React.createElement(\"div\", {\n    className: s.Dropdown__menu\n  }, options.length > 5 && React.createElement(\"div\", {\n    className: s.Dropdown__menu__search\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: searchTerm || '',\n    onChange: handleChange,\n    onKeyDown: handleKeyDown,\n    placeholder: \"Search...\",\n    className: s.Dropdown__menu__search__input\n  })), React.createElement(MenuContext.Provider, {\n    value: {\n      searchTerm: searchTerm,\n      addOption: addOption,\n      setClickHandlerForOption: setClickHandlerForOption\n    }\n  }, React.createElement(\"div\", {\n    className: s.Dropdown__menu__inner,\n    ref: contentRef\n  }, anyGroup ? children : React.createElement(\"div\", {\n    className: s.Dropdown__menu__group__content\n  }, children))))));\n};","map":{"version":3,"names":["React","createRef","useCallback","useContext","useEffect","useRef","useState","useInView","scrollIntoView","mergeRefs","DropdownContext","Group","MenuContext","Portal","s","MenuDesktopContainer","forwardRef","_a","ref","children","createElement","className","style","zIndex","getAbsoluteHeight","el","styles","window","getComputedStyle","margin","Number","parseFloat","marginTop","marginBottom","Math","ceil","offsetHeight","getAbsoluteWidth","marginLeft","marginRight","offsetWidth","setPosition","panel","parent","alignment","rect","getBoundingClientRect","height","parentWidth","width","left","concat","pageXOffset","windowHeight","max","document","documentElement","clientHeight","innerHeight","menu","querySelector","Dropdown__menu","fitsBelow","bottom","fitsAbove","top","spaceAbove","spaceBelow","maxHeight","visibility","Menu","_b","closeMenu","childrenArray","Children","toArray","_c","searchTerm","setSearchTerm","_d","options","setOptions","handleChange","e","target","value","anyGroup","some","child","type","addOption","id","old","__spreadArray","filter","x","setClickHandlerForOption","handler","map","__assign","contentRef","handleKeyDown","event","key","preventDefault","stopPropagation","includes","current","delta","selectedOption_1","nextOption","Dropdown__menu__option","elements","Array","from","querySelectorAll","index","findIndex","nextIndex","length","classList","remove","add","scrollMode","behavior","selectedOption","id_1","dataset","optionId","option","find","_e","threshold","rootMargin","triggerOnce","observerRef","inView","entry","parentRef","menuRef","reposition","intersectionRatio","resizeObserver_1","ResizeObserver","observe","disconnect","undefined","addEventListener","removeEventListener","Fragment","Dropdown__spacer","Dropdown__menu__search","onChange","onKeyDown","placeholder","Dropdown__menu__search__input","Provider","Dropdown__menu__inner","Dropdown__menu__group__content"],"sources":["/Users/fabienpicard/Projects/astro-website/node_modules/datocms-react-ui/src/Dropdown/Menu.tsx"],"sourcesContent":["import React, {\n  createRef,\n  type SyntheticEvent,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useInView } from 'react-intersection-observer';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { mergeRefs } from '../mergeRefs';\nimport { DropdownContext } from './DropdownContext';\nimport { Group } from './Group';\nimport { MenuContext } from './MenuContext';\nimport { Portal } from './Portal';\nimport s from './styles.module.css.json';\n\nconst MenuDesktopContainer = React.forwardRef<\n  HTMLDivElement,\n  { children: React.ReactNode }\n>(({ children }, ref) => (\n  <Portal>\n    <div\n      className={s['Dropdown__menu-container']}\n      style={{ zIndex: 1000 }}\n      ref={ref}\n    >\n      {children}\n    </div>\n  </Portal>\n));\n\nfunction getAbsoluteHeight(el: HTMLElement) {\n  const styles = window.getComputedStyle(el);\n  const margin =\n    Number.parseFloat(styles.marginTop) +\n    Number.parseFloat(styles.marginBottom);\n  return Math.ceil(el.offsetHeight + margin);\n}\n\nfunction getAbsoluteWidth(el: HTMLElement) {\n  const styles = window.getComputedStyle(el);\n  const margin =\n    Number.parseFloat(styles.marginLeft) +\n    Number.parseFloat(styles.marginRight);\n  return Math.ceil(el.offsetWidth + margin);\n}\n\nfunction setPosition(\n  panel: HTMLElement,\n  parent: HTMLElement,\n  alignment: 'left' | 'right',\n) {\n  const rect = parent.getBoundingClientRect();\n  const height = getAbsoluteHeight(panel);\n  const parentWidth = getAbsoluteWidth(parent);\n  const width = getAbsoluteWidth(panel);\n\n  if (alignment === 'left') {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.left = `${rect.left + window.pageXOffset}px`;\n  } else {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.left = `${\n      rect.left + window.pageXOffset + parentWidth - width\n    }px`;\n  }\n\n  const windowHeight = Math.max(\n    document.documentElement.clientHeight || 0,\n    window.innerHeight || 0,\n  );\n\n  const menu = panel.querySelector<HTMLElement>(`.${s.Dropdown__menu}`);\n\n  if (!menu) {\n    return;\n  }\n\n  const styles = window.getComputedStyle(menu);\n  const marginTop = Number.parseFloat(styles.marginTop);\n\n  const fitsBelow = rect.bottom + height <= windowHeight;\n  const fitsAbove = rect.top - height > 0;\n\n  if (!fitsBelow && fitsAbove) {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.top = `${rect.bottom - height}px`;\n  } else if (fitsBelow) {\n    // eslint-disable-next-line no-param-reassign\n    panel.style.top = `${rect.bottom}px`;\n  } else {\n    const spaceAbove = rect.top;\n    const spaceBelow = windowHeight - rect.bottom;\n\n    if (spaceBelow > spaceAbove) {\n      // eslint-disable-next-line no-param-reassign\n      panel.style.top = `${rect.bottom}px`;\n      menu.style.maxHeight = `${windowHeight - rect.bottom - marginTop - 10}px`;\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      panel.style.top = '0px';\n      menu.style.maxHeight = `${rect.top - marginTop}px`;\n    }\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  panel.style.visibility = 'visible';\n}\n\nexport type MenuProps = {\n  children: React.ReactNode;\n  alignment?: 'left' | 'right';\n};\n\nexport const Menu = ({\n  children,\n  alignment = 'left',\n}: MenuProps): JSX.Element => {\n  const { closeMenu } = useContext(DropdownContext);\n\n  const childrenArray = React.Children.toArray(children);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [options, setOptions] = useState<\n    Array<{\n      id: string;\n      handler?: (e: SyntheticEvent) => void;\n    }>\n  >([]);\n\n  const handleChange = useCallback(\n    (e) => {\n      setSearchTerm(e.target.value);\n    },\n    [setSearchTerm],\n  );\n\n  const anyGroup = childrenArray.some(\n    (child) =>\n      typeof child === 'object' && 'type' in child && child.type === Group,\n  );\n\n  const addOption = useCallback(\n    (id: string) => {\n      setOptions((old) => [...old, { id }]);\n\n      return () => {\n        setOptions((old) => old.filter((x) => x.id !== id));\n      };\n    },\n    [setOptions],\n  );\n\n  const setClickHandlerForOption = useCallback(\n    (id: string, handler: (e: SyntheticEvent) => void) => {\n      setOptions((old) =>\n        old.map((x) => (x.id !== id ? x : { ...x, handler })),\n      );\n    },\n    [setOptions],\n  );\n\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === 'Escape') {\n        event.preventDefault();\n        event.stopPropagation();\n        closeMenu();\n      }\n\n      if (['ArrowDown', 'ArrowUp'].includes(event.key)) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (!contentRef.current) {\n          return;\n        }\n\n        const delta = event.key === 'ArrowUp' ? -1 : 1;\n\n        const selectedOption = contentRef.current.querySelector(\n          `.${s['Dropdown__menu__option--is-selected']}`,\n        );\n\n        let nextOption: Element | null;\n\n        if (!selectedOption) {\n          nextOption = contentRef.current.querySelector(\n            `.${s.Dropdown__menu__option}`,\n          );\n        } else {\n          const elements = Array.from(\n            contentRef.current.querySelectorAll(`.${s.Dropdown__menu__option}`),\n          );\n          const index = elements.findIndex((el) => el === selectedOption);\n          const nextIndex =\n            index + delta < 0\n              ? elements.length - 1\n              : (index + delta) % elements.length;\n          nextOption = elements[nextIndex];\n          selectedOption.classList.remove(\n            s['Dropdown__menu__option--is-selected'],\n          );\n        }\n\n        if (nextOption) {\n          nextOption.classList.add(s['Dropdown__menu__option--is-selected']);\n\n          scrollIntoView(nextOption, {\n            scrollMode: 'if-needed',\n            behavior: 'auto',\n          });\n        }\n      }\n\n      if (event.key === 'Enter') {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (!contentRef.current) {\n          return;\n        }\n\n        const selectedOption = contentRef.current.querySelector(\n          `.${s['Dropdown__menu__option--is-selected']}`,\n        );\n\n        if (selectedOption) {\n          const id = (selectedOption as HTMLButtonElement).dataset.optionId;\n          const option = options.find((x) => x.id === id);\n          if (option?.handler) {\n            option.handler(event);\n          }\n        }\n      }\n    },\n    [options],\n  );\n\n  const [observerRef, inView, entry] = useInView({\n    threshold: 0,\n    rootMargin: '0px 0px 0px 0px',\n    triggerOnce: false,\n  });\n\n  const parentRef = createRef<HTMLDivElement>();\n  const menuRef = createRef<HTMLDivElement>();\n\n  const reposition = useCallback(() => {\n    if (menuRef.current && parentRef.current) {\n      setPosition(menuRef.current, parentRef.current, alignment);\n    }\n  }, [menuRef, parentRef, alignment]);\n\n  useEffect(() => {\n    reposition();\n  }, [inView, entry?.intersectionRatio]);\n\n  useEffect(() => {\n    if (menuRef.current && parentRef.current) {\n      const resizeObserver = new ResizeObserver(reposition);\n      resizeObserver.observe(menuRef.current);\n      resizeObserver.observe(parentRef.current);\n\n      return () => {\n        resizeObserver.disconnect();\n      };\n    }\n\n    return undefined;\n  }, [menuRef, reposition]);\n\n  useEffect(() => {\n    window.addEventListener('resize', reposition);\n    return () => window.removeEventListener('resize', reposition);\n  }, [reposition]);\n\n  return (\n    <>\n      <div\n        ref={mergeRefs(observerRef, parentRef)}\n        className={s.Dropdown__spacer}\n      />\n      <MenuDesktopContainer ref={menuRef}>\n        <div className={s.Dropdown__menu}>\n          {options.length > 5 && (\n            <div className={s.Dropdown__menu__search}>\n              <input\n                type=\"text\"\n                value={searchTerm || ''}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Search...\"\n                className={s.Dropdown__menu__search__input}\n              />\n            </div>\n          )}\n          <MenuContext.Provider\n            value={{ searchTerm, addOption, setClickHandlerForOption }}\n          >\n            <div className={s.Dropdown__menu__inner} ref={contentRef}>\n              {anyGroup ? (\n                children\n              ) : (\n                <div className={s.Dropdown__menu__group__content}>\n                  {children}\n                </div>\n              )}\n            </div>\n          </MenuContext.Provider>\n        </div>\n      </MenuDesktopContainer>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}